<StackLayout>
    <ScrollView>
        <StackLayout>

            <StackLayout marginTop="30">
                <Label horizontalAlignment="center" text="GAME OVER" textWrap="true" fontSize="19"></Label>
                <Label horizontalAlignment="center" text="{{categoryName}}" textWrap="true"></Label>

                <StackLayout *ngIf="game.gameOptions.playerMode == PlayerMode.Single">
                    <Image row="0" col="0" src="{{getImageUrl(user)}}" backgroundColor="gray" stretch="aspectFill"
                        height="64" width="64" marginLeft="10" verticalAlignment="center" marginRight="10" borderRadius="50"></Image>
                    <Label horizontalAlignment="center" text="{{playerUserName}}" textWrap="true"></Label>
                    <Label horizontalAlignment="center" text="Round {{game.round}} / {{totalRound}}" textWrap="true"></Label>
                    <Label horizontalAlignment="center" text="Score {{game.stats[user.userId].score}}" textWrap="true"></Label>
                    <StackLayout orientation="horizontal" horizontalAlignment="center">
                        <Image *ngIf="game.stats[user.userId].score>=1" src="~/assets/images/score1.png" height="30"
                            width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                            borderRadius="50" top="10" left="80"></Image>
                        <Image *ngIf="game.stats[user.userId].score>=2" src="~/assets/images/score2.png" height="30"
                            width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                            borderRadius="50" top="10" left="80"></Image>
                        <Image *ngIf="game.stats[user.userId].score>=3" src="~/assets/images/score3.png" height="30"
                            width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                            borderRadius="50" top="10" left="80"></Image>
                        <Image *ngIf="game.stats[user.userId].score>=4" src="~/assets/images/score4.png" height="30"
                            width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                            borderRadius="50" top="10" left="80"></Image>
                        <Image *ngIf="game.stats[user.userId].score>=5" src="~/assets/images/score5.png" height="30"
                            width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                            borderRadius="50" top="10" left="80"></Image>

                    </StackLayout>
                </StackLayout>

                <StackLayout *ngIf="game.gameOptions.playerMode == PlayerMode.Opponent">
                    <GridLayout rows="*" columns="auto,auto,*">
                        <Image row="0" col="0" src="{{getImageUrl(user)}}" backgroundColor="gray" stretch="aspectFill"
                            height="64" width="64" marginLeft="2" verticalAlignment="center" borderRadius="50"></Image>
                        <StackLayout row="0" col="1" paddingLeft="20" paddingTop="10">
                            <GridLayout rows="*,*,*,*" columns="*">
                                <Label row="0" column="0" text="{{playerUserName}}" textWrap="true" class="user-name"></Label>
                                <Label row="1" column="0" text="Round {{game.round}} / {{totalRound}}" textWrap="true"></Label>
                                <Label row="2" column="0" text="Score {{game.stats[user.userId].score}}" textWrap="true"
                                    class="tagging"> </Label>
                            </GridLayout>
                        </StackLayout>
                        <StackLayout row="0" col="2" orientation="horizontal" horizontalAlignment="center">
                            <Image *ngIf="game.stats[user.userId].score>=1" src="~/assets/images/score1.png" height="30"
                                width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                borderRadius="50" top="10" left="80"></Image>
                            <Image *ngIf="game.stats[user.userId].score>=2" src="~/assets/images/score2.png" height="30"
                                width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                borderRadius="50" top="10" left="80"></Image>
                            <Image *ngIf="game.stats[user.userId].score>=3" src="~/assets/images/score3.png" height="30"
                                width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                borderRadius="50" top="10" left="80"></Image>
                            <Image *ngIf="game.stats[user.userId].score>=4" src="~/assets/images/score4.png" height="30"
                                width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                borderRadius="50" top="10" left="80"></Image>
                            <Image *ngIf="game.stats[user.userId].score>=5" src="~/assets/images/score5.png" height="30"
                                width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                borderRadius="50" top="10" left="80"></Image>

                            <Label text="badge" textWrap="true"></Label>
                        </StackLayout>
                    </GridLayout>
                    <StackLayout>
                        <Label text="V/S" verticalAlignment="center" textWrap="true" padding="15"> </Label>
                        <GridLayout rows="*" columns="auto,auto,*">
                            <Image row="0" col="0" src="{{getImageUrl(otherUserInfo)}}" backgroundColor="gray" stretch="aspectFill"
                                height="64" width="64" marginLeft="2" verticalAlignment="center" borderRadius="50"></Image>
                            <StackLayout row="0" col="1" paddingLeft="20" paddingTop="10">
                                <GridLayout rows="*,*,*,*" columns="*">
                                    <Label row="0" column="0" text="{{otherUserInfo?.displayName}}" textWrap="true"
                                        class="user-name"></Label>
                                    <Label row="1" column="0" text="Round {{game.round}} / {{totalRound}}" textWrap="true"></Label>
                                    <Label row="2" column="0" text="Score {{game.stats[user.userId].score}}" textWrap="true"
                                        class="tagging"> </Label>
                                </GridLayout>
                            </StackLayout>
                            <StackLayout row="0" col="2" orientation="horizontal" horizontalAlignment="center">
                                <Image *ngIf="game.stats[otherUserId].score>=1" src="~/assets/images/score1.png" height="30"
                                    width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                    borderRadius="50" top="10" left="80"></Image>
                                <Image *ngIf="game.stats[otherUserId].score>=2" src="~/assets/images/score2.png" height="30"
                                    width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                    borderRadius="50" top="10" left="80"></Image>
                                <Image *ngIf="game.stats[otherUserId].score>=3" src="~/assets/images/score3.png" height="30"
                                    width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                    borderRadius="50" top="10" left="80"></Image>
                                <Image *ngIf="game.stats[otherUserId].score>=4" src="~/assets/images/score4.png" height="30"
                                    width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                    borderRadius="50" top="10" left="80"></Image>
                                <Image *ngIf="game.stats[otherUserId].score>=5" src="~/assets/images/score5.png" height="30"
                                    width="30" marginLeft="2" verticalAlignment="center" marginLeft="2" padding="20"
                                    borderRadius="50" top="10" left="80"></Image>

                                <Label text="badge" textWrap="true"></Label>
                            </StackLayout>
                        </GridLayout>
                    </StackLayout>
                </StackLayout>

                <StackLayout>
                    <StackLayout *ngIf="
                            (game.gameOptions.playerMode != PlayerMode.Single && 
                             game.round < 16 &&
                             game.stats[user.userId].score > game.stats[otherUserId].score)
                            ||
                            (game.gameOptions.playerMode == PlayerMode.Single &&
                             game.playerQnAs.length - game.stats[user.userId].score !== 4)"
                        orientation="horizontal" margin="15" horizontalAlignment="center">
                        <Button class="thumb-up" text=""></Button>
                        <Label text="{{playerUserName}} Won" textWrap="true" marginTop="7" marginLeft="10"></Label>
                    </StackLayout>
                    <StackLayout *ngIf="
                            (game.gameOptions.playerMode != PlayerMode.Single &&
                             game.round < 16 &&
                             game.stats[user.userId].score < game.stats[otherUserId].score)
                            ||
                            (game.gameOptions.playerMode == PlayerMode.Single &&
                             game.playerQnAs.length - game.stats[user.userId].score === 4)"
                        orientation="horizontal" margin="15" horizontalAlignment="center">
                        <Button class="thumb-down" text=""></Button>
                        <Label text="{{playerUserName}} Lost" textWrap="true" marginTop="7" marginLeft="10"></Label>
                    </StackLayout>

                    <StackLayout *ngIf="
                            (game.gameOptions.playerMode != PlayerMode.Single &&
                             game.round < 16 &&
                             game.stats[user.userId].score == game.stats[otherUserId].score)"
                        orientation="horizontal" margin="15" horizontalAlignment="center">
                        <Button class="thumb-up" text=""></Button>
                        <Label text="It's a Tie" textWrap="true" marginTop="7" marginLeft="10"></Label>
                    </StackLayout>

                    <StackLayout *ngIf="
                            game.gameOptions.playerMode != PlayerMode.Single &&
                             game.round === 16"
                        orientation="horizontal" margin="15" horizontalAlignment="center">
                        <Button class="thumb-up" text=""></Button>
                        <Label text="It's a Draw" textWrap="true" marginTop="7" marginLeft="10"></Label>
                    </StackLayout>

                </StackLayout>
                <StackLayout>
                    <Button text="Play Game" (tap)="reMatch()" *ngIf="game.gameOptions.playerMode == PlayerMode.Single"></Button>
                    <Image *ngIf="disableRematchBtn" src="~/assets/images/ajax-loader.gif" stretch="aspectFill" height="64"
                        width="64" marginLeft="10" verticalAlignment="center" marginRight="10" borderRadius="50"></Image>
                    <Button text="Home" [nsRouterLink]="['/dashboard']"></Button>
                </StackLayout>
            </StackLayout>

            <StackLayout>

                <GridLayout rows="auto,auto" columns="auto,*" padding="5" margin="10 5"  (tap)="bindQuestions();showQuesAndAnswer=!showQuesAndAnswer;">
                        <Label row="0" col="0" text="View questions & answers" textWrap="true" class="label"></Label>
                        <Label row="0" col="1" class="fa expand-options" horizontalAlignment="right" text="{{ showQuesAndAnswer ? '&#xf067;' : '&#xf068;' }}"
                            textWrap="true" padding="7" borderWidth="2" borderColor="#A9A9A9" (tap)="showQuesAndAnswer = !showQuesAndAnswer" background="#fff"></Label>
                </GridLayout>
                
                <Label *ngIf="questionsArray.length == 0 && !showQuesAndAnswer" text="LOADING...." textWrap="true"></Label>
                
                <StackLayout *ngIf="questionsArray.length != 0 && !showQuesAndAnswer">
                    <GridLayout *ngFor="let row  of questionsArray;let i=index;" rows="auto,auto,auto" columns="auto,*,auto">
                        <Label row="0" col="0" text="Q{{i+1}}" textWrap="true" padding="5"></Label>
                        <Label row="0" col="1" text="{{row.questionText}}" textWrap="true"></Label>
                        <Label row="1" col="0" rowspan="2" text="A{{i+1}}" textWrap="true" padding="5"></Label>
                        <StackLayout row="1" col="1" *ngFor="let answer of row.answers">
                            <StackLayout *ngIf="answer.correct">
                                <Label text="Correct Ans: {{answer.answerText}}" textWrap="true"></Label>
                            </StackLayout>
                        </StackLayout>
                        <Label row="2" col="1" text="Your Ans: {{row.userGivenAnswer}}" textWrap="true"></Label>
                        <Button col="3" rowSpan="3" text="report" padding="5"></Button>
                    </GridLayout>
                </StackLayout>
            </StackLayout>

        </StackLayout>

    </ScrollView>
</StackLayout>